<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h3>
        plus vous saurez regarder loin dans le passé plus vous verrez loin dans le futur
    </h3>
    <script>

                const secret_key = "MULTIMEDIA",
                      message    = "plus vous saurez regarder";
                let message_crypted = message.toUpperCase();
        
                let alphabet         = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                let alphabet_crypted = "";
                for(let j=0; j<secret_key.length; j++){
                    let letter = secret_key.charAt(j);
        
                    if(!alphabet_crypted.includes(letter)){
                        alphabet_crypted += letter;
                        alphabet = alphabet.replace(letter, '');
                    }
                }

                alphabet_crypted += alphabet;
                console.log(alphabet_crypted);
        
                // on initialise l'alphabet pour qu'il est de nouveau 26 lettres
                alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                console.log(alphabet);
        
                // on passe en revue chaque lettre de l'alphabet
        
                for(let i=0; i<alphabet.length; i++){
                    const letter = alphabet_crypted.charAt(i);
                    console.log(alphabet[i], letter);
                    message_crypted = message_crypted.replaceAll(alphabet[i], letter );
                    console.log(message_crypted);
                }

        console.log(message_crypted);

                
                document.write(`<h3>${message_crypted}</h3>`); //the result is wrong...what went wrong?
            </script>
        
</body>
</html>